<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Introduction · Clang.jl</title><meta name="title" content="Introduction · Clang.jl"/><meta property="og:title" content="Introduction · Clang.jl"/><meta property="twitter:title" content="Introduction · Clang.jl"/><meta name="description" content="Documentation for Clang.jl."/><meta property="og:description" content="Documentation for Clang.jl."/><meta property="twitter:description" content="Documentation for Clang.jl."/><meta property="og:url" content="https://JuliaInterop.github.io/Clang.jl/"/><meta property="twitter:url" content="https://JuliaInterop.github.io/Clang.jl/"/><link rel="canonical" href="https://JuliaInterop.github.io/Clang.jl/"/><script data-outdated-warner src="assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="assets/documenter.js"></script><script src="search_index.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href>Clang.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li class="is-active"><a class="tocitem" href>Introduction</a><ul class="internal"><li><a class="tocitem" href="#Installation"><span>Installation</span></a></li><li><a class="tocitem" href="#C-bindings-generator"><span>C-bindings generator</span></a></li><li><a class="tocitem" href="#LibClang"><span>LibClang</span></a></li></ul></li><li><a class="tocitem" href="generator/">Generator Tutorial</a></li><li><a class="tocitem" href="tutorial/">LibClang Tutorial</a></li><li><a class="tocitem" href="libclang/">LibClang Wrapper API Reference</a></li><li><a class="tocitem" href="api/">Clang API Reference</a></li><li><a class="tocitem" href="generated_changelog/">Changelog</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Introduction</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Introduction</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/JuliaInterop/Clang.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/JuliaInterop/Clang.jl/blob/master/docs/src/index.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Clang"><a class="docs-heading-anchor" href="#Clang">Clang</a><a id="Clang-1"></a><a class="docs-heading-anchor-permalink" href="#Clang" title="Permalink"></a></h1><p>This package provides a Julia language wrapper for libclang: the stable, C-exported interface to the LLVM Clang compiler. The <a href="http://clang.llvm.org/doxygen/group__CINDEX.html">libclang API documentation</a> provides background on the functionality available through libclang, and thus through the Julia wrapper. The repository also hosts related tools built on top of libclang functionality.</p><h2 id="Installation"><a class="docs-heading-anchor" href="#Installation">Installation</a><a id="Installation-1"></a><a class="docs-heading-anchor-permalink" href="#Installation" title="Permalink"></a></h2><p>Now, the package provides an out-of-box installation experience on Linux, macOS and Windows. You could simply install it by running:</p><pre><code class="nohighlight hljs">pkg&gt; add Clang</code></pre><p>If you want to run the tests to check that everything is working the usual <code>] test</code> command will work. If you&#39;re making changes to the package you can also use <a href="https://juliatesting.github.io/ReTest.jl/stable/">ReTest.jl</a> and <a href="https://github.com/JuliaTesting/TestEnv.jl">TestEnv.jl</a> to run the tests (or a selection) iteratively:</p><pre><code class="language-julia hljs"># One-liner to keep in your shell history
julia&gt; using TestEnv; TestEnv.activate(); import ReTest, Clang; ReTest.load(Clang)

# Run all the tests. This will be slow the first time because ReTest needs to
# start the worker process for running the tests.
julia&gt; ClangTests.runtests()

# Run a selection of the tests
julia&gt; ClangTests.runtests(&quot;comments&quot;)</code></pre><p>We need to load the <code>ClangTests</code> module with <code>ReTest.load(Clang)</code> because that will take care of tracking all the <code>include</code>&#39;ed test files if Revise is already loaded. This way the tests will be tracked by Revise just like regular package code and the worker process used for running the tests will be kept around, which is a much faster workflow than running <code>] test</code>.</p><h2 id="C-bindings-generator"><a class="docs-heading-anchor" href="#C-bindings-generator">C-bindings generator</a><a id="C-bindings-generator-1"></a><a class="docs-heading-anchor-permalink" href="#C-bindings-generator" title="Permalink"></a></h2><p>The package includes a generator to create Julia wrappers for C libraries from a collection of header files. The following declarations are currently supported:</p><ul><li>function: translated to Julia ccall (some caveats about variadic functions, see <a href="generator/#Variadic-Function">Variadic Function</a>)</li><li>struct: translated to Julia struct</li><li>enum: translated to <a href="https://docs.julialang.org/en/v1/base/base/#Base.Enums.Enum"><code>Enum</code></a> or <a href="https://github.com/JuliaInterop/CEnum.jl"><code>CEnum</code></a></li><li>union: translated to Julia struct</li><li>typedef: translated to Julia typealias to underlying intrinsic type</li><li>macro: limited support</li><li>bitfield: experimental support</li></ul><p>The following example wraps <code>include/clang-c/*.h</code> from <code>Clang_jll</code> and prints the wrapper to <code>LibClang.jl</code>.</p><p>First write a configuration script <code>generator.toml</code>.</p><pre><code class="language-toml hljs">[general]
library_name = &quot;libclang&quot;
output_file_path = &quot;./LibClang.jl&quot;
module_name = &quot;LibClang&quot;
jll_pkg_name = &quot;Clang_jll&quot;
export_symbol_prefixes = [&quot;CX&quot;, &quot;clang_&quot;]</code></pre><p>Then load the configurations and generate a wrapper.</p><pre><code class="language-julia hljs">using Clang.Generators
using Clang.LibClang.Clang_jll

cd(@__DIR__)

include_dir = normpath(Clang_jll.artifact_dir, &quot;include&quot;)
clang_dir = joinpath(include_dir, &quot;clang-c&quot;)

# wrapper generator options
options = load_options(joinpath(@__DIR__, &quot;generator.toml&quot;))

# add compiler flags, e.g. &quot;-DXXXXXXXXX&quot;
args = get_default_args()
push!(args, &quot;-I$include_dir&quot;)

headers = [joinpath(clang_dir, header) for header in readdir(clang_dir) if endswith(header, &quot;.h&quot;)]
# there is also an experimental `detect_headers` function for auto-detecting top-level headers in the directory
# headers = detect_headers(clang_dir, args)

# create context
ctx = create_context(headers, args, options)

# run generator
build!(ctx)</code></pre><div class="admonition is-info"><header class="admonition-header">Compatibility</header><div class="admonition-body"><p>The generator above is introduced in Clang.jl 0.14. If you are working with older versions of Clang.jl, check <a href="https://juliainterop.github.io/Clang.jl/v0.12/">older versions of documentation</a></p></div></div><h2 id="LibClang"><a class="docs-heading-anchor" href="#LibClang">LibClang</a><a id="LibClang-1"></a><a class="docs-heading-anchor-permalink" href="#LibClang" title="Permalink"></a></h2><p>LibClang is a thin wrapper over libclang. It&#39;s one-to-one mapped to the libclang APIs. By <code>using Clang.LibClang</code>, all of the <code>CX</code>/<code>clang_</code>-prefixed libclang APIs are imported into the current namespace, with which you could build up your own tools from scratch. If you are unfamiliar with the Clang AST, a good starting point is the <a href="http://clang.llvm.org/docs/IntroductionToTheClangAST.html">Introduction to the Clang AST</a>.</p></article><nav class="docs-footer"><a class="docs-footer-nextpage" href="generator/">Generator Tutorial »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.7.0 on <span class="colophon-date" title="Wednesday 16 October 2024 10:30">Wednesday 16 October 2024</span>. Using Julia version 1.8.5.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
